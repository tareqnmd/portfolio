---
import Icon from '../../components/icons/index.astro';
import Card from '../../components/Card.astro';
import Section from '../../components/Section.astro';
import SectionHeader from '../../components/SectionHeader.astro';
import { EXPERIENCES } from '../../lib';

const delayClasses = ['animate-delay-100', 'animate-delay-200', 'animate-delay-300', 'animate-delay-400', 'animate-delay-500', 'animate-delay-600'];
---

<Section id="experience" label="Experience section">
	<SectionHeader title="Experience" subtitle="My professional journey" />
	
	<!-- Timeline -->
	<div class="relative">
		<!-- Timeline line -->
		<div class="absolute left-4 top-0 bottom-0 w-px bg-border md:left-1/2 md:-translate-x-px"></div>
		
		<div class="flex flex-col gap-8">
			{EXPERIENCES.map((exp, index) => (
				<div class:list={["animate-on-scroll relative flex gap-8 md:gap-0", delayClasses[index] || 'animate-delay-100']}>
					<!-- Timeline dot -->
					<div class="absolute left-4 md:left-1/2 w-8 h-8 -translate-x-1/2 flex items-center justify-center rounded-full bg-background border-2 border-primary z-10">
						<Icon 
							name={exp.type === 'work' ? 'briefcase' : 'graduation-cap'} 
							size={14} 
							class="text-primary" 
						/>
					</div>
					
					<!-- Content -->
					<div class={`ml-12 md:ml-0 md:w-1/2 ${index % 2 === 0 ? 'md:pr-12 md:text-right' : 'md:pl-12 md:ml-auto'}`}>
						<Card class="flex flex-col gap-2">
							<div class={`flex flex-col gap-1 ${index % 2 === 0 ? 'md:items-end' : ''}`}>
								<span class="text-xs font-medium text-primary">
									{exp.startDate} â€” {exp.endDate}
								</span>
								<h4 class="font-medium text-foreground">{exp.title}</h4>
								<p class="text-sm text-muted">{exp.organization}</p>
								{exp.location && (
									<p class="text-xs text-muted">{exp.location}</p>
								)}
							</div>
							<p class={`text-sm text-muted ${index % 2 === 0 ? 'md:text-right' : ''}`}>
								{exp.description}
							</p>
							{exp.highlights && exp.highlights.length > 0 && (
								<ul class={`flex flex-col gap-1 text-sm text-muted ${index % 2 === 0 ? 'md:items-end' : ''}`}>
									{exp.highlights.map(highlight => (
										<li class="flex items-center gap-2">
											<span class="w-1 h-1 rounded-full bg-primary flex-shrink-0"></span>
											{highlight}
										</li>
									))}
								</ul>
							)}
						</Card>
					</div>
				</div>
			))}
		</div>
	</div>
</Section>
