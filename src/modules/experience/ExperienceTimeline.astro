---
import Icon from '@/components/icons/index.astro';
import type { Experience } from '@/lib';

interface Props {
	experience: Experience;
}

const { experience } = Astro.props;
---

<section class="lg:w-2/5 p-6 lg:border-r border-border/30">
	<header class="flex items-start gap-3 mb-4">
		<div class="flex-shrink-0 w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center">
			<Icon
				name={experience.type === 'work' ? 'briefcase' : 'graduation-cap'}
				size={18}
				class="text-primary"
			/>
		</div>
		<div>
			<h3 class="text-lg font-semibold text-foreground group-hover:text-primary transition-colors">
				{experience.organization}
			</h3>
			{experience.location && <p class="text-sm text-muted">{experience.location}</p>}
		</div>
	</header>

	<ol class="relative ml-5 pl-6 border-l border-border/50 list-none max-lg:hidden">
		{
			experience.roles.map((role, roleIndex) => (
				<li class:list={['relative pb-4 last:pb-0', roleIndex > 0 ? 'pt-4' : '']}>
					<div class="absolute -left-6 top-0 w-3 h-3 rounded-full bg-primary ring-4 ring-background-secondary/30 -translate-x-1/2" />
					<div class="flex flex-col">
						<span class="text-xs font-mono text-primary mb-1">
							{role.startDate} â€” {role.endDate}
						</span>
						<h4 class="text-sm font-medium text-foreground">{role.title}</h4>
					</div>
				</li>
			))
		}
	</ol>
</section>
