---
import Layout from '../layouts/Layout.astro';
import HeroSection from '../modules/home/HeroSection.astro';
import AboutSection from '../modules/about/AboutSection.astro';
import ExperienceSection from '../modules/about/ExperienceSection.astro';
import ProjectsSection from '../modules/projects/ProjectsSection.astro';
import BlogsSection from '../modules/blogs/BlogsSection.astro';
---

<Layout>
	<div class="flex flex-col gap-20 md:gap-28 lg:gap-36 pb-20 md:pb-28 lg:pb-36">
		<HeroSection />
		<AboutSection />
		<ExperienceSection />
		<ProjectsSection />
		<BlogsSection />
	</div>
</Layout>

<script>
	function initAnimations() {
		const observer = new IntersectionObserver(
			entries => {
				entries.forEach(entry => {
					if (entry.isIntersecting) {
						entry.target.classList.add('in-view');
					}
				});
			},
			{
				rootMargin: '0px 0px -50px 0px',
				threshold: 0.1,
			}
		);

		document.querySelectorAll('.animate-on-scroll').forEach(el => {
			observer.observe(el);
		});

		document.querySelectorAll('.skill-bar').forEach(el => {
			observer.observe(el);
		});
	}

	// Run on initial load
	initAnimations();

	// Re-run after View Transitions navigation
	document.addEventListener('astro:after-swap', initAnimations);
</script>
